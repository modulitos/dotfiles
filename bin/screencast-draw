#!/usr/bin/env sh

set -euo pipefail


# grim -g "$(slurp)" "$HOME/Pictures/$(date +'screenshot_%s.png')"


# WINDOW_ID=$(getmouselocation)
# wf-recorder -o "$WINDOW_ID" --file "$HOME/videos/$(date +'screencast_%s.mp4')"

# Need the -t option:
# https://github.com/ammen99/wf-recorder/issues/152

wf-recorder -t -g "$(slurp)" --file "$HOME/videos/$(date +'screencast_%s.mp4')"

# wf-recorder -t --file "$HOME/videos/$(date +'screencast_%s.mp4')"

# pkill -SIGINT $(pgrep wf-recorder)

# stop the screen cast with:
# (Or ctrl-c if running in a terminal)
# kill -SIGINT "$(pgrep wf-recorder)"




# windowid=`getmouselocation`
# FILENAME="${1:-out.ogv}"
# echo "FILENAME arg: $FILENAME"
# recordmydesktop --no-sound --windowid $windowid -o $FILENAME
